<!DOCTYPE html>
<html>
<head>
<title>Login</title>
<style>
body {
  background:#061021;
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  font-family: Inter, sans-serif;
}
.box {
  background:#0b1220;
  padding:30px;
  border-radius:10px;
  width:320px;
  text-align:center;
}
input {
  width:100%;
  padding:10px;
  border:0;
  margin-top:10px;
  border-radius:6px;
}
button {
  width:100%;
  padding:10px;
  background:#06b6d4;
  border:0;
  margin-top:10px;
  border-radius:6px;
  color:#fff;
  font-weight:bold;
}
</style>
</head>
<body>
<div class="box">
  <h2>Enter Access Code</h2>
  <input id="code" placeholder="Access Code">
  <button onclick="login()">Enter</button>
  <p id="msg"></p>
</div>

<script>
async function login() {
  const code = document.getElementById("code").value;

  const res = await fetch("/.netlify/functions/validate-session", {
    method: "POST",
    body: JSON.stringify({ code })
  });

  const data = await res.json();

  if (!data.valid) {
    document.getElementById("msg").innerText = "Invalid or expired access code";
    return;
  }

  // Store session token
  document.cookie = "session=" + data.token + "; path=/";

  window.location.href = "index.html"; 
}
</script>
</body>
</html>
