<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>YOTT — Movies</title>

<!-- Tailwind CSS CDN -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E6E43CJJDT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-E6E43CJJDT');
</script>

<script>(function(s){s.dataset.zone='10401410',s.src='https://al5sm.com/tag.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>

</head>
<body class="bg-[#061021] text-[#e6eef6] p-5 flex justify-center font-inter">

<div class="w-full max-w-[1200px] flex flex-col gap-6">

  <!-- Header -->
  <header class="flex flex-wrap justify-between items-center gap-4 p-3 bg-white/5 rounded-lg">
    <a href="#" class="flex items-center gap-2 text-white no-underline">
      <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-[#06b6d4] to-[#4f46e5] grid place-items-center font-bold text-lg text-white">Y</div>
      <h1 class="text-lg font-semibold m-0">YOTT</h1>
    </a>

    <div class="flex flex-1 flex-wrap items-center gap-3 min-w-0">
      <div class="flex items-center gap-2 bg-white/5 px-3 py-1 rounded-lg flex-1 min-w-0" title="Search">
        <svg class="w-4 h-4 text-gray-400" viewBox="0 0 24 24" fill="none">
          <path stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35"/>
          <circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="1.6"/>
        </svg>
        <input id="q" type="search" placeholder="Search movies" class="bg-transparent border-0 outline-none w-full text-white placeholder-gray-400 min-w-0"/>
      </div>
    </div>
  </header>

  <!-- Logo -->
  <div class="flex justify-center mb-4">
    <img src="ONEV.png" alt="One V Movies" class="block w-[80%] max-w-[400px] min-w-[180px] h-auto"/>
  </div>

  <!-- Welcome / scrolling text -->
  <div class="overflow-hidden whitespace-nowrap text-center mb-4">
    <span class="inline-block animate-[scroll_10s_linear_infinite] text-xl font-semibold text-[#06b6d4]">
      One V Movies — One V Movies — One V Movies — One V Movies
    </span>
  </div>

  <!-- Grid -->
  <main>
    <div id="moviesGrid" class="grid gap-4 grid-cols-[repeat(auto-fill,minmax(180px,1fr))] justify-items-center"></div>
  </main>

</div>

<!-- Tailwind animation -->
<style>
@keyframes scroll {
  0% { transform: translateX(100%); }
  100% { transform: translateX(-100%); }
}
.animate-\[scroll_10s_linear_infinite\] {
  animation: scroll 10s linear infinite;
}
</style>

<!-- Movies Script -->
<script type="module">
import { movies } from './movies.js'; // External movies.js

const grid = document.getElementById('moviesGrid');
const qInput = document.getElementById('q');

function render(list){
  grid.innerHTML = '';
  if(!list.length){
    grid.innerHTML = `
      <div class="flex flex-col items-center justify-center gap-4 p-10 bg-white/5 rounded-lg text-gray-400 text-center">
        <svg class="w-20 h-20 stroke-gray-400" viewBox="0 0 64 64" fill="none">
          <circle cx="32" cy="32" r="30"/>
          <line x1="20" y1="20" x2="44" y2="44"/>
          <line x1="44" y1="20" x2="20" y2="44"/>
        </svg>
        <h3 class="text-xl">No movies found</h3>
        <p>Try searching with a different keyword</p>
      </div>`;
    return;
  }

  const sorted = [...list].sort((a,b) => new Date(b.date) - new Date(a.date));
  sorted.forEach(movie => {
    const card = document.createElement('div');
    card.className = 'relative w-full max-w-[220px] rounded-lg overflow-hidden transition-transform hover:-translate-y-1 hover:shadow-lg bg-[#0b1220]';

    const thumb = document.createElement('div');
    thumb.className = 'relative w-full aspect-[2/3] rounded-lg overflow-hidden flex items-center justify-center';

    const bgImg = document.createElement('img');
    bgImg.className = 'absolute top-0 left-0 w-full h-full object-cover opacity-30 brightness-[0.7] z-0';
    bgImg.src = movie.poster || 'https://via.placeholder.com/300x450?text=No+Image';
    bgImg.alt = movie.title;
    bgImg.onerror = ()=> bgImg.src='https://via.placeholder.com/300x450?text=No+Image';
    thumb.appendChild(bgImg);

    const frontImg = document.createElement('img');
    frontImg.className = 'absolute top-1/2 left-1/2 w-[100px] h-auto object-contain rounded-lg z-10 transform -translate-x-1/2 -translate-y-1/2';
    frontImg.src = movie.poster || 'https://via.placeholder.com/200x300?text=No+Image';
    frontImg.alt = movie.title;
    frontImg.onerror = ()=> frontImg.src='https://via.placeholder.com/200x300?text=No+Image';
    thumb.appendChild(frontImg);

    const play = document.createElement('a');
    play.className = 'absolute top-1/2 left-1/2 w-[50px] h-[50px] rounded-full bg-[#06b6d4]/90 text-white text-lg flex items-center justify-center transform -translate-x-1/2 -translate-y-1/2 hover:scale-110 hover:shadow-lg z-20';
    play.textContent = '▶';
    play.href = movie.url;
    play.target = "_blank";
    play.rel = "noopener noreferrer";
    thumb.appendChild(play);

    const overlay = document.createElement('div');
    overlay.className = 'absolute bottom-0 left-0 w-full p-2 bg-gradient-to-t from-black/85 to-transparent flex flex-col gap-1 text-white z-30';
    const titleDiv = document.createElement('div');
    titleDiv.className = 'flex items-center gap-1 flex-wrap font-semibold text-sm';
    titleDiv.textContent = movie.title;
    if(movie.isNew){
      const badge = document.createElement('span');
      badge.className = 'bg-[#06b6d4] text-white text-xs font-bold px-1.5 py-0.5 rounded';
      badge.textContent = 'NEW';
      titleDiv.appendChild(badge);
    }
    overlay.appendChild(titleDiv);
    thumb.appendChild(overlay);

    card.appendChild(thumb);
    grid.appendChild(card);
  });
}

// Fixed search: exact and case-insensitive
qInput.addEventListener('input', ()=>{
  const query = qInput.value.trim().toLowerCase();
  const filtered = movies.filter(m => m.title.toLowerCase().includes(query));
  render(filtered);
});

// Initial render
render(movies);

</script>
</body>
</html>
